<!doctype html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Motion Med Sync - Requirements Documentation</title>
    <link rel="stylesheet" href="css/styles.css" />
    <link rel="stylesheet" href="css/requirements.css" />
  </head>
  <body>
    <!-- Navigation Header -->
    <div class="nav-header">
      <div class="nav-logo">
        <div class="nav-logo-icon">M</div>
        <div class="nav-logo-text">MotionMedSync</div>
      </div>
      <div class="nav-links">
        <a href="index.html" class="nav-link active">Requirements</a>
        <a href="data_fields.html" class="nav-link">Data Fields</a>
        <a href="system_diagram.html" class="nav-link">System Diagram</a>
        <a href="process_flow.html" class="nav-link">Process Flow</a>
      </div>
    </div>

    <div class="main-content">
      <div class="header" id="header">
        <!-- Header content will be loaded dynamically -->
      </div>

      <div id="requirements-container">
        <!-- Section dividers and requirements will be loaded dynamically -->
        <div id="loading">
          <div class="loading-spinner"></div>
          <p>Loading requirements...</p>
        </div>
      </div>

      <div class="footer">
        © 2025 Motion Med Sync | A modern healthcare data management platform
      </div>
    </div>

    <script>
      // Define the requirements data at the top level
      const requirementsData = {
        title: 'Motion Med Sync',
        subtitle:
          'A modern platform designed to streamline patient data management, integrate with Garmin services, and provide comprehensive analytics tools for healthcare professionals.',
        sections: [
          {
            name: 'Core Requirements',
            requirements: [
              {
                id: 1,
                title: 'User Accounts',
                description: [
                  'Allows administrators to set up new users in the system',
                  'Enables deactivation of existing accounts when needed',
                  'Maintains proper access control through user management',
                  'Ensures only authorized individuals can access patient data',
                ],
              },
              {
                id: 2,
                title: 'Login / Forgot Password',
                description: [
                  'Provides a secure authentication system for users',
                  'Includes password reset functionality via email',
                  'Helps users recover access when credentials are lost',
                  'Ensures system security while maintaining accessibility',
                ],
              },
              {
                id: 3,
                title: 'Separate Patients by Study',
                description: [
                  'Enables creation of research studies within the system',
                  'Allows administrators to update study details as needed',
                  'Provides option to disable studies when no longer active',
                  'Assigns patients to studies',
                  'Helps maintain organized clinical trials and research',
                ],
              },
              {
                id: 4,
                title: 'CSV Download',
                description: [
                  'Allows exporting patient data in CSV format',
                  'Enables researchers to download study results',
                  'Supports external analysis and reporting needs',
                  'Provides data backup functionality for critical information',
                ],
              },
              {
                id: 5,
                title: 'Create Patient',
                description: [
                  'Facilitates adding new patients to the system',
                  'Establishes patient records for monitoring and analysis',
                  'Allows patients to be deactivated',
                ],
              },
              {
                id: 6,
                title: 'Connect Patient to Garmin Account',
                description: [
                  'Links patient profiles with their Garmin accounts',
                  "Enables automatic data retrieval from Garmin's platform",
                  'Facilitates seamless health and fitness tracking',
                ],
              },
              {
                id: 7,
                title: 'View Patient Data',
                description: [
                  'Displays comprehensive patient metrics in an intuitive interface',
                  'Shows historical trends and patterns over time',
                  'Provides healthcare professionals with actionable insights',
                  'Enables informed clinical decision-making',
                ],
              },
            ],
          },
          {
            name: 'Analytics & Data Management',
            requirements: [
              {
                id: 8,
                title: 'High-Level Dashboard of Data',
                description: [
                  'Offers an overview of aggregated statistics',
                  'Displays total studies and active patients',
                  'Shows key performance metrics at a glance',
                  'Provides snapshot of overall system health',
                ],
              },
              {
                id: 9,
                title: 'Pull Data from Garmin API',
                description: [
                  'Automates retrieval of activity data from Garmin',
                  'Synchronizes health metrics with the platform',
                  'Ensures up-to-date patient information',
                  'Maintains real-time data accuracy',
                ],
              },
              {
                id: 10,
                title: 'Backup Raw Data',
                description: [
                  'Implements reliable backup processes',
                  'Preserves raw patient information securely',
                  'Safeguards collected metrics from loss',
                  'Minimizes data integrity risks',
                ],
              },
              {
                id: 11,
                title: 'Store Data into Database',
                description: [
                  'Securely stores all incoming patient data',
                  'Maintains structured database organization',
                  'Provides foundation for analytics capabilities',
                  'Ensures reliable record-keeping',
                ],
              },
              {
                id: 12,
                title: 'Create Calendar of Patient Activities',
                description: [
                  'Generates visual schedule of patient workouts',
                  'Tracks treatment regimens and therapies',
                  'Helps healthcare providers monitor engagement',
                  'Supports adherence to care plans',
                ],
              },
              {
                id: 13,
                title: 'CSV Processing – Summaries, Time Series',
                description: [
                  'Processes uploaded CSV files for analysis',
                  'Creates statistical summaries of patient data',
                  'Generates time-series data',
                  'Enables trend analysis and reporting',
                ],
              },
              {
                id: 14,
                title: 'Set Power Min and Max per Patient',
                description: [
                  'Allows defining individualized power thresholds',
                  'Customizes exercise parameters for each patient',
                  'Tailors training guidelines to specific needs',
                  'Supports personalized care approaches',
                ],
              },
            ],
          },
        ],
      };
      document.addEventListener('DOMContentLoaded', () => {
        async function loadRequirements() {
          try {
            // Use the data defined above
            renderPage(requirementsData);
          } catch (error) {
            console.error('Error loading requirements:', error);
            document.getElementById('loading').innerHTML = `
              <p style="color: #e74c3c;">Error loading requirements: ${error.message}</p>
            `;
          }
        }

        // Function to render the page with the loaded data
        function renderPage(data) {
          // Render the header
          const headerElement = document.getElementById('header');
          headerElement.innerHTML = `
                    <div class="page-title">${data.title}</div>
                    <div class="page-subtitle">${data.subtitle}</div>
                `;

          // Clear loading indicator
          const container = document.getElementById('requirements-container');
          container.innerHTML = '';

          // Initialize a counter for requirements
          let requirementCounter = 1;

          // Render each section with its requirements
          data.sections.forEach((section) => {
            // Add section divider
            const sectionDivider = document.createElement('div');
            sectionDivider.className = 'section-divider';
            sectionDivider.innerHTML = `<div class="divider-text">${section.name}</div>`;
            container.appendChild(sectionDivider);

            // Create requirements list for this section
            const requirementsList = document.createElement('ul');
            requirementsList.className = 'requirements-list';

            // Add each requirement to the list
            section.requirements.forEach((req) => {
              const requirementItem = document.createElement('li');
              requirementItem.className = 'requirement-item';

              // Create bullet points from the description array
              const bulletPoints = req.description
                .map((desc) => `<li class="description-bullet">${desc}</li>`)
                .join('');

              requirementItem.innerHTML = `
                            <div class="requirement-header">
                                <div class="requirement-number">GARMIN-${requirementCounter}</div>
                                <div class="requirement-title">${req.title}</div>
                            </div>
                            <div class="requirement-description">
                                <ul class="description-bullets">
                                    ${bulletPoints}
                                </ul>
                            </div>
                        `;

              requirementsList.appendChild(requirementItem);
              requirementCounter++; // Increment the counter for the next requirement
            });

            container.appendChild(requirementsList);
          });
        }

        // Load the requirements when the page loads
        loadRequirements();
      });
    </script>
  </body>
</html>
