<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Motion Med Sync - Data Fields</title>
    <style>
      :root {
        --primary: #2470e0;
        --primary-light: #ebf2ff;
        --primary-dark: #1a5bc0;
        --secondary: #50b9ff;
        --text: #333333;
        --text-light: #666666;
        --light-bg: #f8f9fd;
        --border: #e6e6e6;
        --success: #00c875;
      }

      * {
        margin: 0;
        padding: 0;
        box-sizing: border-box;
        font-family: 'Segoe UI', Arial, sans-serif;
      }

      body {
        background-color: var(--light-bg);
        background-image: linear-gradient(135deg, #f8f9fd 0%, #e9effd 100%);
        color: var(--text);
        line-height: 1.5;
        padding: 30px;
        padding-top: 90px;
        min-height: 100vh;
      }

      /* Navigation styles */
      .nav-header {
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        background-color: white;
        box-shadow: 0 2px 10px rgba(0, 0, 0, 0.1);
        z-index: 1000;
        display: flex;
        justify-content: space-between;
        align-items: center;
        padding: 0 20px;
        height: 60px;
      }

      .nav-logo {
        display: flex;
        align-items: center;
      }

      .nav-logo-icon {
        width: 36px;
        height: 36px;
        background-color: var(--primary);
        border-radius: 8px;
        display: flex;
        align-items: center;
        justify-content: center;
        color: white;
        font-size: 18px;
        font-weight: bold;
        margin-right: 10px;
      }

      .nav-logo-text {
        font-weight: 600;
        font-size: 1.2rem;
        color: var(--primary-dark);
      }

      .nav-links {
        display: flex;
      }

      .nav-link {
        padding: 0 15px;
        color: var(--text);
        text-decoration: none;
        font-weight: 500;
        font-size: 0.95rem;
        position: relative;
        height: 60px;
        display: flex;
        align-items: center;
        transition: color 0.2s ease;
      }

      .nav-link:hover {
        color: var(--primary);
      }

      .nav-link.active {
        color: var(--primary);
      }

      .nav-link.active:after {
        content: '';
        position: absolute;
        bottom: 0;
        left: 15px;
        right: 15px;
        height: 3px;
        background-color: var(--primary);
        border-radius: 3px 3px 0 0;
      }

      .main-content {
        max-width: 1000px;
        margin: 0 auto;
        background-color: white;
        border-radius: 12px;
        box-shadow: 0 8px 30px rgba(0, 0, 0, 0.08);
        overflow: hidden;
      }

      .header {
        padding: 30px;
        background: linear-gradient(
          120deg,
          var(--primary) 0%,
          var(--primary-dark) 100%
        );
        color: white;
        text-align: center;
      }

      .page-title {
        font-size: 2rem;
        font-weight: 600;
        margin-bottom: 10px;
        text-shadow: 0 2px 4px rgba(0, 0, 0, 0.1);
      }

      .page-subtitle {
        font-size: 1.1rem;
        opacity: 0.9;
        max-width: 600px;
        margin: 0 auto;
      }

      .content {
        padding: 30px;
      }

      h1,
      h2,
      h3 {
        color: var(--primary-dark);
        margin-bottom: 1rem;
      }

      h1 {
        font-size: 2rem;
        border-bottom: 2px solid var(--primary-light);
        padding-bottom: 0.5rem;
        margin-bottom: 1.5rem;
      }

      h2 {
        font-size: 1.5rem;
        margin-top: 2rem;
        border-bottom: 1px solid var(--border);
        padding-bottom: 0.5rem;
      }

      table {
        width: 100%;
        border-collapse: collapse;
        margin: 1.5rem 0;
        box-shadow: 0 1px 3px rgba(0, 0, 0, 0.05);
      }

      th,
      td {
        padding: 10px 15px;
        text-align: left;
        border-bottom: 1px solid var(--border);
      }

      th {
        background-color: var(--primary-light);
        font-weight: 600;
      }

      tr:hover {
        background-color: rgba(0, 0, 0, 0.01);
      }

      .footer {
        text-align: center;
        padding: 25px;
        font-size: 0.9rem;
        color: #6f7880;
        background-color: #f5f7fa;
        border-top: 1px solid var(--border);
      }

      @media (max-width: 768px) {
        body {
          padding: 15px;
          padding-top: 80px;
        }

        .nav-links {
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
          padding-bottom: 5px;
        }

        .content {
          padding: 20px;
        }

        table {
          display: block;
          overflow-x: auto;
          -webkit-overflow-scrolling: touch;
        }
      }
    </style>
  </head>
  <body>
    <!-- Navigation Header -->
    <div class="nav-header">
      <div class="nav-logo">
        <div class="nav-logo-icon">M</div>
        <div class="nav-logo-text">MotionMedSync</div>
      </div>
      <div class="nav-links">
        <a href="index.html" class="nav-link">Requirements</a>
        <a href="data_fields.html" class="nav-link active">Data Fields</a>
        <a href="system_diagram.html" class="nav-link">System Diagram</a>
        <a href="process_flow.html" class="nav-link">Process Flow</a>
      </div>
    </div>

    <div class="main-content">
      <div class="header">
        <div class="page-title">Data Fields</div>
        <div class="page-subtitle">
          Comprehensive overview of data structures and fields used in the
          Motion Med Sync platform
        </div>
      </div>

      <div class="content" id="markdown-content">
        <!-- The content will be loaded by JavaScript from the Markdown file -->
        <div id="loading">Loading data fields...</div>
      </div>

      <div class="footer">
        Â© 2025 Motion Med Sync | A modern healthcare data management platform
      </div>
    </div>

    <script>
      document.addEventListener('DOMContentLoaded', function () {
        // Function to convert markdown to HTML
        function convertMarkdownToHTML(markdown) {
          // This is a very simplified markdown converter
          // In a production environment, use a proper library like marked.js

          // Convert headers
          markdown = markdown.replace(/^# (.*$)/gm, '<h1>$1</h1>');
          markdown = markdown.replace(/^## (.*$)/gm, '<h2>$1</h2>');
          markdown = markdown.replace(/^### (.*$)/gm, '<h3>$1</h3>');

          // Convert tables (simplified - requires specific format)
          let inTable = false;
          let tableHTML = '';
          let lines = markdown.split('\n');
          let result = [];

          for (let i = 0; i < lines.length; i++) {
            let line = lines[i];

            // Table start detection
            if (line.startsWith('|') && !inTable) {
              inTable = true;
              tableHTML = '<table>';

              // Add header row
              tableHTML += '<thead><tr>';
              let headers = line
                .split('|')
                .filter((cell) => cell.trim() !== '');
              headers.forEach((header) => {
                tableHTML += `<th>${header.trim()}</th>`;
              });
              tableHTML += '</tr></thead><tbody>';

              // Skip the separator line
              i++;
              continue;
            }

            // Table row processing
            if (inTable && line.startsWith('|')) {
              tableHTML += '<tr>';
              let cells = line.split('|').filter((cell) => cell.trim() !== '');
              cells.forEach((cell) => {
                tableHTML += `<td>${cell.trim()}</td>`;
              });
              tableHTML += '</tr>';
              continue;
            }

            // Table end detection
            if (inTable && !line.startsWith('|')) {
              inTable = false;
              tableHTML += '</tbody></table>';
              result.push(tableHTML);
            }

            // Non-table content
            if (!inTable) {
              result.push(line);
            }
          }

          // Close any open table at the end
          if (inTable) {
            tableHTML += '</tbody></table>';
            result.push(tableHTML);
          }

          // Join the result and return
          return result.join('\n');
        }

        // Simulate loading markdown file
        // In a real implementation, you would fetch the file from the server
        setTimeout(function () {
          const markdownContent = `# Motion Med Sync Data Fields

## Patient Data Fields

| Field Name | Type | Description | Required |
|------------|------|-------------|----------|
| patient_id | String | Unique identifier for the patient | Yes |
| first_name | String | Patient's first name | Yes |
| last_name | String | Patient's last name | Yes |
| dob | Date | Date of birth | Yes |
| gender | String | Patient's gender | Yes |
| email | String | Contact email address | No |
| phone | String | Contact phone number | No |
| address | String | Patient's address | No |
| emergency_contact | String | Emergency contact information | No |
| medical_conditions | Array | List of pre-existing conditions | No |
| allergies | Array | List of known allergies | No |
| medications | Array | Current medications | No |
| garmin_account_id | String | Connected Garmin account ID | No |

## Study Data Fields

| Field Name | Type | Description | Required |
|------------|------|-------------|----------|
| study_id | String | Unique identifier for the study | Yes |
| study_name | String | Name of the study | Yes |
| description | String | Detailed description of the study | Yes |
| start_date | Date | Start date of the study | Yes |
| end_date | Date | End date of the study | No |
| principal_investigator | String | Name of the lead researcher | Yes |
| status | String | Current status (Active, Completed, etc.) | Yes |
| associated_patients | Array | List of patient IDs in the study | No |
| data_collection_frequency | String | How often data is collected | Yes |
| metrics_tracked | Array | List of metrics being monitored | Yes |

## Garmin Data Fields

| Field Name | Type | Description | Units |
|------------|------|-------------|-------|
| heart_rate | Number | Heart rate measurement | BPM |
| steps | Number | Daily step count | Count |
| distance | Number | Distance traveled | Meters |
| calories | Number | Calories burned | kcal |
| active_minutes | Number | Minutes of activity | Minutes |
| sleep_duration | Number | Total sleep time | Minutes |
| sleep_quality | String | Quality assessment of sleep | N/A |
| stress_level | Number | Stress level reading | 1-100 |
| vo2_max | Number | VO2 Max estimation | ml/kg/min |
| floors_climbed | Number | Number of floors climbed | Count |
| resting_heart_rate | Number | Heart rate at rest | BPM |
| power_output | Number | Power generated during activity | Watts |
| cadence | Number | Steps per minute while active | SPM |

## System Data Fields

| Field Name | Type | Description | Access Level |
|------------|------|-------------|-------------|
| user_id | String | Unique identifier for system user | Admin |
| username | String | Login username | Admin |
| role | String | User role (Admin, Clinician, Researcher) | Admin |
| last_login | DateTime | Timestamp of last login | Admin |
| created_by | String | ID of user who created the record | System |
| created_at | DateTime | Timestamp of record creation | System |
| updated_at | DateTime | Timestamp of last update | System |
| data_source | String | Origin of the data point | System |
| sync_status | String | Status of data synchronization | Admin |
| backup_status | String | Status of last backup | Admin |`;

          // Convert Markdown to HTML
          const htmlContent = convertMarkdownToHTML(markdownContent);

          // Insert the HTML content
          document.getElementById('markdown-content').innerHTML = htmlContent;
        }, 500);
      });
    </script>
  </body>
</html>
